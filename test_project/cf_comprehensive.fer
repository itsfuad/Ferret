// Comprehensive Control Flow Test
// This file demonstrates all control flow analysis features

// Valid: All branches return
fn max(a: i32, b: i32) -> i32 {
    if a > b {
        return a;
    } else {
        return b;
    }
}

// Valid: Variadic parameters (last position)
fn sum(base: i32, values: ...i32) -> i32 {
    return base;
}

// Valid: Complex nested branching with all returns
fn classify(x: i32) -> i32 {
    if x < 0 {
        if x < -100 {
            return -2;
        } else {
            return -1;
        }
    } else if x > 0 {
        if x > 100 {
            return 2;
        } else {
            return 1;
        }
    } else {
        return 0;
    }
}

// Valid: Early return simplifies logic
fn safeDivide(a: i32, b: i32) -> i32 {
    if b == 0 {
        return 0;
    }
    return a / b;
}

// Valid: Void function doesn't need return
fn printMessage(x: i32) {
    if x > 0 {
        return;
    }
}

// Valid: Loop with break and continue (simplified for parser)
fn findFirst(limit: i32) -> i32 {
    return -1;
}

// ERROR: Missing return in else branch
fn badMax(a: i32, b: i32) -> i32 {
    if a > b {
        return a;
    }
}

// ERROR: Variadic parameter not last
fn badVariadic(args: ...i32, x: i32) -> i32 {
    return x;
}

// ERROR: Duplicate parameter names
fn badParams(x: i32, x: i32) -> i32 {
    return x;
}
