// Comprehensive function literal test - all features

fn main() {
    // 1. Simple function literal
    let add := fn(a: i32, b: i32) -> i32 {
        return a + b;
    };

    // 2. Function literal with local variables
    let compute := fn(x: i32) -> i32 {
        let temp := x * 2;
        let result := temp + 10;
        return result;
    };

    // 3. Closure - accessing outer scope
    let outerVar := 100;
    let useClosure := fn(val: i32) -> i32 {
        // Can access both parameter 'val' and outer scope 'outerVar'
        return val + outerVar;
    };

    // 4. Nested blocks inside function literal
    let withBlocks := fn(n: i32) -> i32 {
        let a := n;
        {
            let b := a + 1;
            a = b * 2;
        }
        // 'b' not accessible here - correctly scoped to inner block
        return a;
    };

    // 5. Multiple nested function literals
    let outer_fn := fn(x: i32) -> i32 {
        let inner_fn := fn(y: i32) -> i32 {
            // Can access both x (from outer_fn) and y (parameter)
            return x + y;
        };
        return x * 2;
    };

    // 6. Function literal with control flow
    let withIf := fn(val: i32) -> i32 {
        if val > 10 {
            let big := val * 2;
            return big;
        }
        return val;
    };
}
