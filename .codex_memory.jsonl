{"ts":"2025-01-01T00:00:00Z","scope":"project","key":"ferret.mir.status","value":"Front-end pipeline complete through MIR: parse/resolve/typecheck/CFG/HIR-lower/MIR. C backend detached. MIR generation covers functions, blocks, if/else, while, match (literal patterns), calls, arithmetic, loads/stores, struct field access, fixed arrays, dynamic arrays. Fixed arrays now require consteval index (negatives allowed) with compile-time error T0028 for non-const; MIR uses constant ptr_add offsets (no runtime bounds checks). Dynamic arrays still emit runtime checks. Optionals/results/coalescing in MIR. Map indexing and map_set emit MIR map_get/map_set ops. Debug -d writes .mir files. Missing: MIR lowering for map literals, map iteration, for/foreach, range expr, dynamic array literals in expressions, result/catch paths, backend MIR->target. Decide runtime OOB behavior for dynamic arrays."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.mir.status","value":"Match lowering now emits MIR switch for switchable types (ints/bool/enums with const, unique cases), then mir.LowerSwitches rewrites switches to compare+CondBr chains before QBE codegen. QBE backend still reports unsupported for call_indirect, struct/array/map ops, optional/result ops, and switch (but switches are lowered away). Control-flow desugar for for/while marked done in TODO; remaining gaps: map literals/iteration, dynamic array literals in expressions, interfaces, function literals/closures, result/catch paths, backend targets and dynamic array OOB policy."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.mir.status","value":"MIR lowering now supports dynamic array literals by calling ferret_array_new/ferret_array_append; TODO updated to mark dynamic array literals done. Map literals/iteration and optional/result backend support still pending."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.mir.status","value":"Builtins: len() for arrays/maps and append() for dynamic arrays now typecheck and lower in MIR. Resolver allows builtin calls; MIR lowers len to array/map size and append to ferret_array_append with element temps. Map literals/iteration and optional/result backend support still pending."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.runtime.status","value":"Added runtime panic helper (ferret_panic) and bounds-check OOB now calls it before Unreachable; build includes runtime/panic.c. QBE Unreachable still emits ret, but panic aborts first."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.runtime.status","value":"Runtime OOB policy decided: dynamic array bounds checks call ferret_panic (prints message + abort) before Unreachable; panic.c linked in build."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.mir.status","value":"MIR lowering now supports map literals via ferret_map_from_pairs_* wrappers and map iteration (MapIterInit/MapIterNext); HIR map for-loops work with temp slot handling. Runtime map_iter_next now returns true when yielding the last entry. Backend roadmap note: wasm target dropped; JS later after native work."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.build.status","value":"Linux build now adds -no-pie to gcc flags to avoid PIE relocation errors from QBE assembly; string-key map literals now compile/run successfully."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.build.status","value":"Build flags now add -no-pie on Linux and -Wl,-no_pie on macOS to avoid PIE relocation issues with QBE assembly; Windows unchanged."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.build.status","value":"Build flags now add -no-pie (linux), -Wl,-no_pie (darwin), -nopie (openbsd); FreeBSD left as default. Windows unchanged."}
{"ts":"2025-12-26T00:00:00Z","scope":"project","key":"ferret.qbe.status","value":"QBE backend now supports MapGet/MapSet and optional values via pointer-backed optionals; added ferret_map_get_optional_out + ferret_optional_unwrap_or runtime helpers and fixed map index assignment typing to use map value type (avoid optional-wrapping RHS). Added example examples/map_index.fer and verified output 1,9,3."}
{"ts":"2025-12-26T17:10:11Z","scope":"project","key":"ferret.closure.status","value":"Function literals/closures implemented end-to-end (HIR/MIR/QBE). Closures capture by reference by default: captured locals are boxed, env stores &T, mutations visible. Function values use closure objects with __fn pointer; call_indirect loads fn and passes env. Added examples/closure_capture.fer, closure_func_value.fer, closure_nested_capture.fer, closure_ref_capture.fer. Func-literal return type defaults to void when omitted."}
{"ts":"2025-12-26T17:41:00Z","scope":"project","key":"ferret.status","value":"Closures now capture by reference by default: captured locals are boxed and closure env stores &T; load/store uses boxed address. Function literals return type defaults to void when omitted. Float printing now ensures a decimal point without trailing zero padding (1.0, 2.5), via ferret_format_f32/f64 in runtime/io.c, bigint f128/f256 string conversion uses same decimal rule, and C backend multi-arg Print/Println uses formatted float strings. Docs updated: website types and README array semantics (dynamic arrays are runtime bounds-checked, grow only via append; fixed arrays require constant indices). TODO: collections/loops marked done; float .0 task done."}
{"ts":"2025-12-27T00:00:00Z","scope":"project","key":"ferret.docs.externs","value":"Lexer now emits comment tokens; parser groups leading comments (Go-style) into CommentGroup and attaches to symbol decls (let/const/type/fn/method), skipping inline/trailing comments during parse. @extern is read from doc comments in stdlib only: global module marks IsBuiltin/BuiltinName; other stdlib modules set IsNative and auto NativeName using ferret_<module>_<Func> (module = last import path segment). Global prelude global.fer declares len/append via @extern and is auto-loaded without import. std/io extern decls now use variadic interface for Print/Println."}
