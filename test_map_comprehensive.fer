// Comprehensive map type test

fn main() {
    // Test 1: Basic map with string keys
    let scores := {
        "alice" => 95,
        "bob" => 87,
        "charlie" => 92
    } as map[str]i32;

    // Test 2: Map indexing returns optional
    let alice_score: i32? = scores["alice"];
    let missing: i32? = scores["david"];

    // Test 3: Elvis operator for default values
    let actual := scores["alice"] ?: 0;      // Should be 95
    let default_val := scores["missing"] ?: -1;  // Should be -1

    // Test 4: Different key/value types
    let prices := {
        "apple" => 1.99,
        "banana" => 0.99,
        "orange" => 1.49
    } as map[str]f64;

    let apple_price := prices["apple"] ?: 0.0;

    // Test 5: Numeric keys
    let id_to_name := {
        1 => "Alice",
        2 => "Bob",
        3 => "Charlie"
    } as map[i32]str;

    let name: str? = id_to_name[1];
    let unknown_name := id_to_name[999] ?: "Unknown";

    // Test 6: Empty map
    let empty := {} as map[str]i32;
    let from_empty := empty["key"] ?: 42;

    // Test 7: Nested optionals (optional in optional context)
    let maybe_score: i32? = scores["alice"];
    let unwrapped := maybe_score ?: 0;  // Unwrap with elvis
}
