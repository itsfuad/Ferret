module Ferret/test_fs_all

fn main() -> void {
  block b1 entry:
    %t1 = const i64 20
    %t2 = const i32 1
    %t3 = call ferret_array_new(%t1, %t2) : []Printable
    %t4 = const str === Testing fs module ===

    %t5 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t6 = ptr_add i32 %t5, 0
    %t7 = const i32 10
    store %t6, %t7
    %t8 = ptr_add str %t5, 4
    store %t8, %t4
    call ferret_array_append(%t3, %t5) : bool
    call io::Println(%t3) : void
    %t9 = const i64 20
    %t10 = const i32 1
    %t11 = call ferret_array_new(%t9, %t10) : []Printable
    %t12 = const str 1. Testing Exists on non-existent file:
    %t13 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t14 = ptr_add i32 %t13, 0
    %t15 = const i32 10
    store %t14, %t15
    %t16 = ptr_add str %t13, 4
    store %t16, %t12
    call ferret_array_append(%t11, %t13) : bool
    call io::Println(%t11) : void
    %t17 = const str nonexistent_file_12345.txt
    %t18 = call fs::Exists(%t17) : bool
    br_if %t18, b2, b4
  block b2 if.then:
    %t19 = const i64 20
    %t20 = const i32 1
    %t21 = call ferret_array_new(%t19, %t20) : []Printable
    %t22 = const str    FAIL: Exists returned true for non-existent file
    %t23 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t24 = ptr_add i32 %t23, 0
    %t25 = const i32 10
    store %t24, %t25
    %t26 = ptr_add str %t23, 4
    store %t26, %t22
    call ferret_array_append(%t21, %t23) : bool
    call io::Println(%t21) : void
    br b3
  block b3 if.end:
    %t35 = const i64 20
    %t36 = const i32 1
    %t37 = call ferret_array_new(%t35, %t36) : []Printable
    %t38 = const str 
2. Testing WriteFile:
    %t39 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t40 = ptr_add i32 %t39, 0
    %t41 = const i32 10
    store %t40, %t41
    %t42 = ptr_add str %t39, 4
    store %t42, %t38
    call ferret_array_append(%t37, %t39) : bool
    call io::Println(%t37) : void
    %t43 = const str test_fs.txt
    %t44 = const str Hello from Ferret!
    %t45 = call fs::WriteFile(%t43, %t44) : str ! bool
    %t46 = result_is_ok %t45
    br_if %t46, b5, b6
  block b4 if.else:
    %t27 = const i64 20
    %t28 = const i32 1
    %t29 = call ferret_array_new(%t27, %t28) : []Printable
    %t30 = const str    PASS: Exists returned false for non-existent file
    %t31 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t32 = ptr_add i32 %t31, 0
    %t33 = const i32 10
    store %t32, %t33
    %t34 = ptr_add str %t31, 4
    store %t34, %t30
    call ferret_array_append(%t29, %t31) : bool
    call io::Println(%t29) : void
    br b3
  block b5 result.ok:
    %t47 = result_unwrap bool %t45
    %t60 = const i64 20
    %t61 = const i32 1
    %t62 = call ferret_array_new(%t60, %t61) : []Printable
    %t63 = const str    PASS: WriteFile succeeded
    %t64 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t65 = ptr_add i32 %t64, 0
    %t66 = const i32 10
    store %t65, %t66
    %t67 = ptr_add str %t64, 4
    store %t67, %t63
    call ferret_array_append(%t62, %t64) : bool
    call io::Println(%t62) : void
    %t68 = const i64 20
    %t69 = const i32 1
    %t70 = call ferret_array_new(%t68, %t69) : []Printable
    %t71 = const str 
3. Testing Exists on existing file:
    %t72 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t73 = ptr_add i32 %t72, 0
    %t74 = const i32 10
    store %t73, %t74
    %t75 = ptr_add str %t72, 4
    store %t75, %t71
    call ferret_array_append(%t70, %t72) : bool
    call io::Println(%t70) : void
    %t76 = const str test_fs.txt
    %t77 = call fs::Exists(%t76) : bool
    br_if %t77, b7, b9
  block b6 result.err:
    %t48 = result_unwrap str %t45
    %t49 = alloca str
    store %t49, %t48
    %t50 = const i64 20
    %t51 = const i32 1
    %t52 = call ferret_array_new(%t50, %t51) : []Printable
    %t53 = const str    FAIL: WriteFile error: 
    %t54 = load str %t49
    %t55 = call ferret_io_ConcatStrings(%t53, %t54) : str
    %t56 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t57 = ptr_add i32 %t56, 0
    %t58 = const i32 10
    store %t57, %t58
    %t59 = ptr_add str %t56, 4
    store %t59, %t55
    call ferret_array_append(%t52, %t56) : bool
    call io::Println(%t52) : void
    ret
  block b7 if.then:
    %t78 = const i64 20
    %t79 = const i32 1
    %t80 = call ferret_array_new(%t78, %t79) : []Printable
    %t81 = const str    PASS: Exists returned true for existing file
    %t82 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t83 = ptr_add i32 %t82, 0
    %t84 = const i32 10
    store %t83, %t84
    %t85 = ptr_add str %t82, 4
    store %t85, %t81
    call ferret_array_append(%t80, %t82) : bool
    call io::Println(%t80) : void
    br b8
  block b8 if.end:
    %t94 = const i64 20
    %t95 = const i32 1
    %t96 = call ferret_array_new(%t94, %t95) : []Printable
    %t97 = const str 
4. Testing ReadFile:
    %t98 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t99 = ptr_add i32 %t98, 0
    %t100 = const i32 10
    store %t99, %t100
    %t101 = ptr_add str %t98, 4
    store %t101, %t97
    call ferret_array_append(%t96, %t98) : bool
    call io::Println(%t96) : void
    %t102 = alloca str
    %t103 = const str test_fs.txt
    %t104 = call fs::ReadFile(%t103) : str ! str
    %t105 = result_is_ok %t104
    br_if %t105, b10, b11
  block b9 if.else:
    %t86 = const i64 20
    %t87 = const i32 1
    %t88 = call ferret_array_new(%t86, %t87) : []Printable
    %t89 = const str    FAIL: Exists returned false for existing file
    %t90 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t91 = ptr_add i32 %t90, 0
    %t92 = const i32 10
    store %t91, %t92
    %t93 = ptr_add str %t90, 4
    store %t93, %t89
    call ferret_array_append(%t88, %t90) : bool
    call io::Println(%t88) : void
    br b8
  block b10 result.ok:
    %t106 = result_unwrap str %t104
    store %t102, %t106
    %t119 = load str %t102
    %t120 = const str Hello from Ferret!
    %t121 = == bool %t119, %t120
    br_if %t121, b12, b14
  block b11 result.err:
    %t107 = result_unwrap str %t104
    %t108 = alloca str
    store %t108, %t107
    %t109 = const i64 20
    %t110 = const i32 1
    %t111 = call ferret_array_new(%t109, %t110) : []Printable
    %t112 = const str    FAIL: ReadFile error: 
    %t113 = load str %t108
    %t114 = call ferret_io_ConcatStrings(%t112, %t113) : str
    %t115 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t116 = ptr_add i32 %t115, 0
    %t117 = const i32 10
    store %t116, %t117
    %t118 = ptr_add str %t115, 4
    store %t118, %t114
    call ferret_array_append(%t111, %t115) : bool
    call io::Println(%t111) : void
    ret
  block b12 if.then:
    %t122 = const i64 20
    %t123 = const i32 1
    %t124 = call ferret_array_new(%t122, %t123) : []Printable
    %t125 = const str    PASS: ReadFile content matches
    %t126 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t127 = ptr_add i32 %t126, 0
    %t128 = const i32 10
    store %t127, %t128
    %t129 = ptr_add str %t126, 4
    store %t129, %t125
    call ferret_array_append(%t124, %t126) : bool
    call io::Println(%t124) : void
    br b13
  block b13 if.end:
    %t140 = const i64 20
    %t141 = const i32 1
    %t142 = call ferret_array_new(%t140, %t141) : []Printable
    %t143 = const str 
5. Testing AppendFile:
    %t144 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t145 = ptr_add i32 %t144, 0
    %t146 = const i32 10
    store %t145, %t146
    %t147 = ptr_add str %t144, 4
    store %t147, %t143
    call ferret_array_append(%t142, %t144) : bool
    call io::Println(%t142) : void
    %t148 = const str test_fs.txt
    %t149 = const str  Appended!
    %t150 = call fs::AppendFile(%t148, %t149) : str ! bool
    %t151 = result_is_ok %t150
    br_if %t151, b15, b16
  block b14 if.else:
    %t130 = const i64 20
    %t131 = const i32 1
    %t132 = call ferret_array_new(%t130, %t131) : []Printable
    %t133 = const str    FAIL: ReadFile content mismatch: 
    %t134 = load str %t102
    %t135 = call ferret_io_ConcatStrings(%t133, %t134) : str
    %t136 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t137 = ptr_add i32 %t136, 0
    %t138 = const i32 10
    store %t137, %t138
    %t139 = ptr_add str %t136, 4
    store %t139, %t135
    call ferret_array_append(%t132, %t136) : bool
    call io::Println(%t132) : void
    br b13
  block b15 result.ok:
    %t152 = result_unwrap bool %t150
    %t165 = alloca str
    %t166 = const str test_fs.txt
    %t167 = call fs::ReadFile(%t166) : str ! str
    %t168 = result_is_ok %t167
    br_if %t168, b17, b18
  block b16 result.err:
    %t153 = result_unwrap str %t150
    %t154 = alloca str
    store %t154, %t153
    %t155 = const i64 20
    %t156 = const i32 1
    %t157 = call ferret_array_new(%t155, %t156) : []Printable
    %t158 = const str    FAIL: AppendFile error: 
    %t159 = load str %t154
    %t160 = call ferret_io_ConcatStrings(%t158, %t159) : str
    %t161 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t162 = ptr_add i32 %t161, 0
    %t163 = const i32 10
    store %t162, %t163
    %t164 = ptr_add str %t161, 4
    store %t164, %t160
    call ferret_array_append(%t157, %t161) : bool
    call io::Println(%t157) : void
    ret
  block b17 result.ok:
    %t169 = result_unwrap str %t167
    store %t165, %t169
    %t182 = load str %t165
    %t183 = const str Hello from Ferret! Appended!
    %t184 = == bool %t182, %t183
    br_if %t184, b19, b21
  block b18 result.err:
    %t170 = result_unwrap str %t167
    %t171 = alloca str
    store %t171, %t170
    %t172 = const i64 20
    %t173 = const i32 1
    %t174 = call ferret_array_new(%t172, %t173) : []Printable
    %t175 = const str    FAIL: ReadFile after append error: 
    %t176 = load str %t171
    %t177 = call ferret_io_ConcatStrings(%t175, %t176) : str
    %t178 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t179 = ptr_add i32 %t178, 0
    %t180 = const i32 10
    store %t179, %t180
    %t181 = ptr_add str %t178, 4
    store %t181, %t177
    call ferret_array_append(%t174, %t178) : bool
    call io::Println(%t174) : void
    ret
  block b19 if.then:
    %t185 = const i64 20
    %t186 = const i32 1
    %t187 = call ferret_array_new(%t185, %t186) : []Printable
    %t188 = const str    PASS: AppendFile content matches
    %t189 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t190 = ptr_add i32 %t189, 0
    %t191 = const i32 10
    store %t190, %t191
    %t192 = ptr_add str %t189, 4
    store %t192, %t188
    call ferret_array_append(%t187, %t189) : bool
    call io::Println(%t187) : void
    br b20
  block b20 if.end:
    %t203 = const i64 20
    %t204 = const i32 1
    %t205 = call ferret_array_new(%t203, %t204) : []Printable
    %t206 = const str 
6. Testing Size:
    %t207 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t208 = ptr_add i32 %t207, 0
    %t209 = const i32 10
    store %t208, %t209
    %t210 = ptr_add str %t207, 4
    store %t210, %t206
    call ferret_array_append(%t205, %t207) : bool
    call io::Println(%t205) : void
    %t211 = alloca i64
    %t212 = const str test_fs.txt
    %t213 = call fs::Size(%t212) : str ! i64
    %t214 = result_is_ok %t213
    br_if %t214, b22, b23
  block b21 if.else:
    %t193 = const i64 20
    %t194 = const i32 1
    %t195 = call ferret_array_new(%t193, %t194) : []Printable
    %t196 = const str    FAIL: AppendFile content mismatch: 
    %t197 = load str %t165
    %t198 = call ferret_io_ConcatStrings(%t196, %t197) : str
    %t199 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t200 = ptr_add i32 %t199, 0
    %t201 = const i32 10
    store %t200, %t201
    %t202 = ptr_add str %t199, 4
    store %t202, %t198
    call ferret_array_append(%t195, %t199) : bool
    call io::Println(%t195) : void
    br b20
  block b22 result.ok:
    %t215 = result_unwrap i64 %t213
    store %t211, %t215
    %t228 = const i64 20
    %t229 = const i32 1
    %t230 = call ferret_array_new(%t228, %t229) : []Printable
    %t231 = const str    File size: 
    %t232 = load i64 %t211
    %t233 = call ferret_string_concat_i64(%t231, %t232) : str
    %t234 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t235 = ptr_add i32 %t234, 0
    %t236 = const i32 10
    store %t235, %t236
    %t237 = ptr_add str %t234, 4
    store %t237, %t233
    call ferret_array_append(%t230, %t234) : bool
    call io::Println(%t230) : void
    %t238 = load i64 %t211
    %t239 = const i32 28
    %t240 = == bool %t238, %t239
    br_if %t240, b24, b26
  block b23 result.err:
    %t216 = result_unwrap str %t213
    %t217 = alloca str
    store %t217, %t216
    %t218 = const i64 20
    %t219 = const i32 1
    %t220 = call ferret_array_new(%t218, %t219) : []Printable
    %t221 = const str    FAIL: Size error: 
    %t222 = load str %t217
    %t223 = call ferret_io_ConcatStrings(%t221, %t222) : str
    %t224 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t225 = ptr_add i32 %t224, 0
    %t226 = const i32 10
    store %t225, %t226
    %t227 = ptr_add str %t224, 4
    store %t227, %t223
    call ferret_array_append(%t220, %t224) : bool
    call io::Println(%t220) : void
    ret
  block b24 if.then:
    %t241 = const i64 20
    %t242 = const i32 1
    %t243 = call ferret_array_new(%t241, %t242) : []Printable
    %t244 = const str    PASS: Size matches expected (28)
    %t245 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t246 = ptr_add i32 %t245, 0
    %t247 = const i32 10
    store %t246, %t247
    %t248 = ptr_add str %t245, 4
    store %t248, %t244
    call ferret_array_append(%t243, %t245) : bool
    call io::Println(%t243) : void
    br b25
  block b25 if.end:
    %t261 = const i64 20
    %t262 = const i32 1
    %t263 = call ferret_array_new(%t261, %t262) : []Printable
    %t264 = const str 
7. Testing Remove:
    %t265 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t266 = ptr_add i32 %t265, 0
    %t267 = const i32 10
    store %t266, %t267
    %t268 = ptr_add str %t265, 4
    store %t268, %t264
    call ferret_array_append(%t263, %t265) : bool
    call io::Println(%t263) : void
    %t269 = const str test_fs.txt
    %t270 = call fs::Remove(%t269) : str ! bool
    %t271 = result_is_ok %t270
    br_if %t271, b27, b28
  block b26 if.else:
    %t249 = const i64 20
    %t250 = const i32 1
    %t251 = call ferret_array_new(%t249, %t250) : []Printable
    %t252 = const str    INFO: Size is 
    %t253 = load i64 %t211
    %t254 = call ferret_string_concat_i64(%t252, %t253) : str
    %t255 = const str  (expected 28)
    %t256 = call ferret_io_ConcatStrings(%t254, %t255) : str
    %t257 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t258 = ptr_add i32 %t257, 0
    %t259 = const i32 10
    store %t258, %t259
    %t260 = ptr_add str %t257, 4
    store %t260, %t256
    call ferret_array_append(%t251, %t257) : bool
    call io::Println(%t251) : void
    br b25
  block b27 result.ok:
    %t272 = result_unwrap bool %t270
    %t285 = const i64 20
    %t286 = const i32 1
    %t287 = call ferret_array_new(%t285, %t286) : []Printable
    %t288 = const str    PASS: Remove succeeded
    %t289 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t290 = ptr_add i32 %t289, 0
    %t291 = const i32 10
    store %t290, %t291
    %t292 = ptr_add str %t289, 4
    store %t292, %t288
    call ferret_array_append(%t287, %t289) : bool
    call io::Println(%t287) : void
    %t293 = const i64 20
    %t294 = const i32 1
    %t295 = call ferret_array_new(%t293, %t294) : []Printable
    %t296 = const str 
8. Verifying file removed:
    %t297 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t298 = ptr_add i32 %t297, 0
    %t299 = const i32 10
    store %t298, %t299
    %t300 = ptr_add str %t297, 4
    store %t300, %t296
    call ferret_array_append(%t295, %t297) : bool
    call io::Println(%t295) : void
    %t301 = const str test_fs.txt
    %t302 = call fs::Exists(%t301) : bool
    br_if %t302, b29, b31
  block b28 result.err:
    %t273 = result_unwrap str %t270
    %t274 = alloca str
    store %t274, %t273
    %t275 = const i64 20
    %t276 = const i32 1
    %t277 = call ferret_array_new(%t275, %t276) : []Printable
    %t278 = const str    FAIL: Remove error: 
    %t279 = load str %t274
    %t280 = call ferret_io_ConcatStrings(%t278, %t279) : str
    %t281 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t282 = ptr_add i32 %t281, 0
    %t283 = const i32 10
    store %t282, %t283
    %t284 = ptr_add str %t281, 4
    store %t284, %t280
    call ferret_array_append(%t277, %t281) : bool
    call io::Println(%t277) : void
    ret
  block b29 if.then:
    %t303 = const i64 20
    %t304 = const i32 1
    %t305 = call ferret_array_new(%t303, %t304) : []Printable
    %t306 = const str    FAIL: File still exists after remove
    %t307 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t308 = ptr_add i32 %t307, 0
    %t309 = const i32 10
    store %t308, %t309
    %t310 = ptr_add str %t307, 4
    store %t310, %t306
    call ferret_array_append(%t305, %t307) : bool
    call io::Println(%t305) : void
    br b30
  block b30 if.end:
    %t319 = const i64 20
    %t320 = const i32 1
    %t321 = call ferret_array_new(%t319, %t320) : []Printable
    %t322 = const str 
9. Testing path utilities:
    %t323 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t324 = ptr_add i32 %t323, 0
    %t325 = const i32 10
    store %t324, %t325
    %t326 = ptr_add str %t323, 4
    store %t326, %t322
    call ferret_array_append(%t321, %t323) : bool
    call io::Println(%t321) : void
    %t327 = alloca str
    %t328 = const str folder
    %t329 = const str file.txt
    %t330 = call fs::Join(%t328, %t329) : str
    store %t327, %t330
    %t331 = const i64 20
    %t332 = const i32 1
    %t333 = call ferret_array_new(%t331, %t332) : []Printable
    %t334 = const str    Join('folder', 'file.txt') = 
    %t335 = load str %t327
    %t336 = call ferret_io_ConcatStrings(%t334, %t335) : str
    %t337 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t338 = ptr_add i32 %t337, 0
    %t339 = const i32 10
    store %t338, %t339
    %t340 = ptr_add str %t337, 4
    store %t340, %t336
    call ferret_array_append(%t333, %t337) : bool
    call io::Println(%t333) : void
    %t341 = alloca str
    %t342 = const str document.txt
    %t343 = call fs::Ext(%t342) : str
    store %t341, %t343
    %t344 = const i64 20
    %t345 = const i32 1
    %t346 = call ferret_array_new(%t344, %t345) : []Printable
    %t347 = const str    Ext('document.txt') = 
    %t348 = load str %t341
    %t349 = call ferret_io_ConcatStrings(%t347, %t348) : str
    %t350 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t351 = ptr_add i32 %t350, 0
    %t352 = const i32 10
    store %t351, %t352
    %t353 = ptr_add str %t350, 4
    store %t353, %t349
    call ferret_array_append(%t346, %t350) : bool
    call io::Println(%t346) : void
    %t354 = alloca str
    %t355 = const str /path/to/file.txt
    %t356 = call fs::Base(%t355) : str
    store %t354, %t356
    %t357 = const i64 20
    %t358 = const i32 1
    %t359 = call ferret_array_new(%t357, %t358) : []Printable
    %t360 = const str    Base('/path/to/file.txt') = 
    %t361 = load str %t354
    %t362 = call ferret_io_ConcatStrings(%t360, %t361) : str
    %t363 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t364 = ptr_add i32 %t363, 0
    %t365 = const i32 10
    store %t364, %t365
    %t366 = ptr_add str %t363, 4
    store %t366, %t362
    call ferret_array_append(%t359, %t363) : bool
    call io::Println(%t359) : void
    %t367 = alloca str
    %t368 = const str /path/to/file.txt
    %t369 = call fs::Dir(%t368) : str
    store %t367, %t369
    %t370 = const i64 20
    %t371 = const i32 1
    %t372 = call ferret_array_new(%t370, %t371) : []Printable
    %t373 = const str    Dir('/path/to/file.txt') = 
    %t374 = load str %t367
    %t375 = call ferret_io_ConcatStrings(%t373, %t374) : str
    %t376 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t377 = ptr_add i32 %t376, 0
    %t378 = const i32 10
    store %t377, %t378
    %t379 = ptr_add str %t376, 4
    store %t379, %t375
    call ferret_array_append(%t372, %t376) : bool
    call io::Println(%t372) : void
    %t380 = const i64 20
    %t381 = const i32 1
    %t382 = call ferret_array_new(%t380, %t381) : []Printable
    %t383 = const str 
10. Testing Cwd:
    %t384 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t385 = ptr_add i32 %t384, 0
    %t386 = const i32 10
    store %t385, %t386
    %t387 = ptr_add str %t384, 4
    store %t387, %t383
    call ferret_array_append(%t382, %t384) : bool
    call io::Println(%t382) : void
    %t388 = alloca str
    %t389 = call fs::Cwd() : str ! str
    %t390 = result_is_ok %t389
    br_if %t390, b32, b33
  block b31 if.else:
    %t311 = const i64 20
    %t312 = const i32 1
    %t313 = call ferret_array_new(%t311, %t312) : []Printable
    %t314 = const str    PASS: File no longer exists
    %t315 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t316 = ptr_add i32 %t315, 0
    %t317 = const i32 10
    store %t316, %t317
    %t318 = ptr_add str %t315, 4
    store %t318, %t314
    call ferret_array_append(%t313, %t315) : bool
    call io::Println(%t313) : void
    br b30
  block b32 result.ok:
    %t391 = result_unwrap str %t389
    store %t388, %t391
    %t404 = const i64 20
    %t405 = const i32 1
    %t406 = call ferret_array_new(%t404, %t405) : []Printable
    %t407 = const str    Current directory: 
    %t408 = load str %t388
    %t409 = call ferret_io_ConcatStrings(%t407, %t408) : str
    %t410 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t411 = ptr_add i32 %t410, 0
    %t412 = const i32 10
    store %t411, %t412
    %t413 = ptr_add str %t410, 4
    store %t413, %t409
    call ferret_array_append(%t406, %t410) : bool
    call io::Println(%t406) : void
    %t414 = const i64 20
    %t415 = const i32 1
    %t416 = call ferret_array_new(%t414, %t415) : []Printable
    %t417 = const str 
=== All tests completed ===
    %t418 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t419 = ptr_add i32 %t418, 0
    %t420 = const i32 10
    store %t419, %t420
    %t421 = ptr_add str %t418, 4
    store %t421, %t417
    call ferret_array_append(%t416, %t418) : bool
    call io::Println(%t416) : void
    ret
  block b33 result.err:
    %t392 = result_unwrap str %t389
    %t393 = alloca str
    store %t393, %t392
    %t394 = const i64 20
    %t395 = const i32 1
    %t396 = call ferret_array_new(%t394, %t395) : []Printable
    %t397 = const str    FAIL: Cwd error: 
    %t398 = load str %t393
    %t399 = call ferret_io_ConcatStrings(%t397, %t398) : str
    %t400 = alloca union {i8, i16, i32, i64, u8, u16, u32, u64, f32, f64, str, byte, bool}
    %t401 = ptr_add i32 %t400, 0
    %t402 = const i32 10
    store %t401, %t402
    %t403 = ptr_add str %t400, 4
    store %t403, %t399
    call ferret_array_append(%t396, %t400) : bool
    call io::Println(%t396) : void
    ret
}
